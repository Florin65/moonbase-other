# Recompile of gcc is necessary as it "fixes" its own copy of the
# bn.h include files.  This will allow gcc to correctly recompile
# an openssl app.

rm -rf /usr/lib/gcc-lib/*/$(installed_version gcc)/include/openssl &> /dev/null

OUR_NEW_SSL_VVV=$(lvu version openssl | perl -pe 's/([0-9]\.[0-9]\.[0-9]).+/$1/')

if [ ! $OUR_NEW_SSL_VVV==$OUR_OLD_SSL_VVV ]; then
  lin -c openssh wget

  for MOD in $(lvu depends openssl | grep -v -e openssh -e theedge -e lunar -e wget) pine ; do
    if module_installed $MOD ; then
      lin -c $MOD
    fi
  done
fi

