# Recompile of gcc is necessary as it "fixes" its own copy of the
# bn.h include files.  This will allow gcc to correctly recompile
# an openssl app.


rm -rf /usr/lib/gcc-lib/*/$(installed_version gcc)/include/openssl &> /dev/null

OUR_VER="$(get_module_config OLD_VER)"

if [ ! -z $OLD_VER ]; then
  lin -c openssh wget

  for MOD in $(lvu depends openssl | grep -v -e openssh -e theedge -e lunar -e wget) pine ; do
    if module_installed $MOD ; then
      lin -c $MOD
    fi
  done
fi

unset_module_config OLD_VER
